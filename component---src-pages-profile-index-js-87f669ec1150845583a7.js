"use strict";(self.webpackChunkrewrite=self.webpackChunkrewrite||[]).push([[920],{5608:function(e,t,a){var r=a(6257),s=a(3349),n=a(9451),l=a(4975);t.Z=e=>{const[t,a,o]=(0,s.F_)(l.I8),i=(0,n.a)(["user"],(async()=>{if(!t)return null;if(o)throw o;const e=(0,r.JU)(l.db,"users",t.uid),a=await(0,r.QT)(e);let s=a.data();return s?{...t,...s,ref:null==a?void 0:a.ref}:void 0}),{enabled:!1===a,...e});return t&&!i.data?{...i,data:t}:i}},9877:function(e,t,a){var r=a(9451),s=a(6257),n=a(3349),l=a(4975),o=a(7598);t.Z=()=>{var e;const[t]=(0,n.F_)(l.I8),a=(0,o.Z)();return(0,r.a)(["user","signup"],(async()=>{const e=(0,s.JU)(l.db,"tournaments",a.data.id,"signups",t.uid),r=await(0,s.QT)(e);if(r.exists())return{...r.data(),ref:r.ref,type:"signup"};const n=(0,s.JU)(l.db,"tournaments",a.data.id,"subs",t.uid),o=await(0,s.QT)(n);return o.exists()?{...o.data(),ref:o.ref,type:"sub"}:null}),{enabled:!!t&&!1===(null===(e=a.data)||void 0===e?void 0:e.hasEnded())})}},1320:function(e,t,a){var r=a(7294);t.Z=e=>{let{children:t}=e;return r.createElement("span",{className:"-my-0.5 whitespace-nowrap rounded-[3px] bg-[rgba(114,_137,_218,_0.3)] p-0.5 text-[87.5%] font-medium"},t)}},2529:function(e,t,a){var r=a(1883),s=a(7294),n=a(3349),l=a(4975);t.Z=e=>{let{children:t}=e;const[a,o]=(0,n.F_)(l.I8);return(0,s.useEffect)((()=>{a||o||(0,r.c4)("/profile/login",{state:{from:window.location.pathname}})}),[o]),a?t:null}},230:function(e,t,a){a.r(t),a.d(t,{default:function(){return B}});var r=a(7294),s=a(1883),n=a(7598),l=a(5608),o=a(6622),i=a(9877),c=a(2954),d=a(2529),u=a(4469),m=a(1369),h=a(4975),g=a(3511);var v=()=>(0,u.D)((async()=>await(0,m.w7)(h.I8)),{onSuccess:()=>{(0,s.c4)("/"),(0,g.ZP)({style:"success",title:"Logout Successful",description:"You have been logged out"}),localStorage.removeItem("discordToken"),h.Eh.invalidateQueries(["user"])},onError:e=>{(0,g.ZP)({style:"error",title:"An error has occurred",description:e.message})}}),p=a(6630),x=a(784),f=a(9686),b=a(3946),E=a(1820),k=a(3882),w=36e5;function N(e,t){(0,k.Z)(2,arguments);var a=(0,b.Z)(t);return(0,E.Z)(e,a*w)}var y=a(2227),M=a(1320),R=a(3349);var Z=()=>{const[e]=(0,R.F_)(h.I8);return(0,u.D)((async()=>await(0,m.h8)(e)),{onSuccess:()=>{(0,s.c4)("/"),(0,g.ZP)({style:"success",title:"Delete Successful",description:"Your account has been deleted"}),h.Eh.invalidateQueries(["user"])},onError:e=>{(0,g.ZP)({style:"error",title:"An error has occurred",description:e.message})}})},C=a(6010);const S=()=>{var e,t,a;const s=(0,l.Z)(),n=(0,o.Z)();return r.createElement("div",{className:"flex flex-col items-stretch gap-8"},r.createElement("div",{className:"flex flex-wrap items-center gap-6"},r.createElement(c.qE,{className:"h-14 w-14 text-slate-400 dark:text-slate-700"}),r.createElement("h2",{className:"mr-auto text-2xl font-medium sm:text-3xl"},null===(e=n.data)||void 0===e?void 0:e.username),r.createElement(j,null)),r.createElement(U,null),r.createElement(T,{className:"flex items-center gap-6"},r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",fill:"currentColor",className:"h-5 flex-shrink-0 text-otd-pink sm:h-6"},r.createElement("path",{d:"M544 0c17.7 0 32 14.3 32 32V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V32c0-17.7 14.3-32 32-32zM416 96c17.7 0 32 14.3 32 32V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V128c0-17.7 14.3-32 32-32zM320 224V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V224c0-17.7 14.3-32 32-32s32 14.3 32 32zM160 288c17.7 0 32 14.3 32 32V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V320c0-17.7 14.3-32 32-32zM64 416v64c0 17.7-14.3 32-32 32s-32-14.3-32-32V416c0-17.7 14.3-32 32-32s32 14.3 32 32z"})),r.createElement("p",{className:"text-xl sm:text-2xl"},"Signal Strength"),r.createElement("p",{className:"ml-auto font-mono text-xl sm:text-2xl"},null===(t=s.data)||void 0===t||null===(a=t.meta)||void 0===a?void 0:a.signal)),r.createElement("div",{className:"flex items-center gap-4"},r.createElement(U,null),r.createElement("p",{className:"flex-shrink-0 text-slate-600 dark:text-slate-400"},"Tournament Dashboard"),r.createElement(U,null)),r.createElement(T,{className:"flex flex-col gap-12"},r.createElement(L,null)))},L=()=>{const e=(0,i.Z)(),t=(0,n.Z)();let a;return a=!t.data||t.data.hasEnded()?{style:"blue",message:"There's no tournament going on at the moment, stay tuned for the next!"}:e.data?"sub"===e.data.type?{style:"lime",message:"You're registered for the tournament as a sub!",button:"Update Profile"}:{style:"green",message:"You're registered for the tournament!",button:"Update Profile"}:t.data.hasClosed()?{style:"orange",message:"Signups have closed, but you can still sign up as a sub!",button:"Signup as a Sub"}:{style:"red",message:"You're not registered for the tournament yet.",button:"Signup"},r.createElement(r.Fragment,null,r.createElement(O,a),r.createElement("div",null,r.createElement("div",{className:"text-lg font-medium uppercase tracking-wider text-slate-600 dark:text-slate-400"},"Schedule"),D(t).map((e=>r.createElement(V,Object.assign({key:e.title},e))))))},O=e=>{let{style:t,message:a,button:n}=e;return r.createElement("div",{className:(0,C.Z)("flex flex-col gap-4 rounded-lg p-4",{blue:"bg-blue-600/20 text-blue-700 dark:bg-blue-400/20 dark:text-blue-400",lime:"bg-lime-600/20 text-lime-700 dark:bg-lime-400/20 dark:text-lime-400",green:"bg-green-600/20 text-green-700 dark:bg-green-400/20 dark:text-green-400",orange:"bg-orange-600/20 text-orange-700 dark:bg-orange-400/20 dark:text-orange-400",red:"bg-red-600/20 text-red-700 dark:bg-red-400/20 dark:text-red-400"}[t])},r.createElement("div",{className:"flex flex-wrap items-center gap-3 font-medium"},r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-6 w-6 flex-shrink-0"},r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.348 14.651a3.75 3.75 0 010-5.303m5.304 0a3.75 3.75 0 010 5.303m-7.425 2.122a6.75 6.75 0 010-9.546m9.546 0a6.75 6.75 0 010 9.546M5.106 18.894c-3.808-3.808-3.808-9.98 0-13.789m13.788 0c3.808 3.808 3.808 9.981 0 13.79M12 12h.008v.007H12V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})),r.createElement("p",{className:"mr-auto"},"Registration Status:"),r.createElement("div",{className:(0,C.Z)("text-default font-bold uppercase tracking-wider underline decoration-2",{blue:"decoration-blue-700/50 dark:decoration-blue-400/50 hover:decoration-blue-700 hover:dark:decoration-blue-400",lime:"decoration-lime-700/50 dark:decoration-lime-400/50 hover:decoration-lime-700 hover:dark:decoration-lime-400",green:"decoration-green-700/50 dark:decoration-green-400/50 hover:decoration-green-700 hover:dark:decoration-green-400",orange:"decoration-orange-700/50 dark:decoration-orange-400/50 hover:decoration-orange-700 hover:dark:decoration-orange-400",red:"decoration-red-700/50 dark:decoration-red-400/50 hover:decoration-red-700 hover:dark:decoration-red-400"}[t])},r.createElement(s.rU,{to:"/signup"},n))),r.createElement("div",{className:"text-default text-lg"},a))},V=e=>{let{title:t,desc:a,status:s,date:n,countdown:l,last:o}=e;const i={past:r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-6 w-6"},r.createElement("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 01.208 1.04l-9 13.5a.75.75 0 01-1.154.114l-6-6a.75.75 0 011.06-1.06l5.353 5.353 8.493-12.739a.75.75 0 011.04-.208z",clipRule:"evenodd"})),present:r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-6 w-6"},r.createElement("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z",clipRule:"evenodd"})),future:r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-6 w-6"},r.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 6a.75.75 0 00-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-3.75V6z",clipRule:"evenodd"}))},c={past:"bg-slate-200 text-slate-400 dark:bg-slate-800 dark:text-slate-500",present:"bg-otd-slate/40 text-otd-slate-600 dark:text-otd-slate-300",future:"bg-slate-300 text-slate-600 dark:bg-slate-700 dark:text-slate-400"};return r.createElement("section",{className:"flex flex-col"},r.createElement("div",{className:"my-2 flex items-center gap-4"},r.createElement("div",{className:(0,C.Z)("flex h-11 w-11 shrink-0 items-center justify-center rounded-lg",c[s])},i[s]),r.createElement("div",{className:{past:"text-slate-400 dark:text-slate-500",present:"text-otd-slate-800 dark:text-otd-slate-200",future:"text-slate-600 dark:text-slate-400"}[s]},r.createElement("div",{className:"flex items-center pb-0.5"},r.createElement("p",{className:"text-2xl font-medium leading-none"},t),l&&r.createElement(z,{countdown:l})),r.createElement("p",{className:{past:"text-slate-400 dark:text-slate-500",present:"text-slate-600 dark:text-slate-400",future:"text-slate-600 dark:text-slate-400"}[s]},n?(0,p.Z)(n,"MMMM d, h:mm aa"):r.createElement(r.Fragment,null,"Â ")))),r.createElement("div",{className:"flex items-center gap-4"},r.createElement("div",{className:(0,C.Z)("flex w-11 shrink-0 justify-center self-stretch",o?"min-h-0":"min-h-[2rem]")},r.createElement("div",{className:(0,C.Z)("h-full w-1 shrink-0",c[s],"present"===s&&"!bg-otd-slate-600 dark:!bg-otd-slate-300")})),"present"===s&&r.createElement("div",{className:"py-4 text-xl"},a)))},z=e=>{let{countdown:t}=e;const a=(0,x.Z)((0,f.Z)({start:t,end:new Date})).split(" ").slice(0,2).join(" ");return r.createElement("span",{className:"text-default mx-2 rounded-md bg-slate-300 px-2 text-lg font-normal dark:bg-slate-700"},"in ",a)},D=e=>{var t,a,n,l,o,i;const c=[{title:"Registration Opens",desc:r.createElement(r.Fragment,null,"It's a new season! Sign up if you haven't already, and tell your friends to sign up too!"),status:"past",date:null,countdown:null},{title:"Check-in Opens",desc:r.createElement(r.Fragment,null,"Remember to check in on discord with the ",r.createElement("code",null,"$checkin")," command in ",r.createElement(M.Z,null,"#check-in"),". You will be disqualified if you fail to do so."),status:"past",date:null,countdown:null},{title:"Registration Closes",desc:r.createElement(r.Fragment,null,"Get hype, just a little longer now! Teams will be released shortly. While you're waiting, make sure to review the rules at"," ",r.createElement(s.rU,{className:"text-otd-slate-600 underline hover:no-underline dark:text-otd-slate-300",to:"/idtga/rules"},"otd.ink/idtga/rules")),status:"past",date:null,countdown:null},{title:"Teams are released",desc:r.createElement(r.Fragment,null,"Start practicing! Contact your fellow teammates and create a Group DM. If you have an issue with one of your team members, you can create a player report 24 hours after teams are released in"," ",r.createElement(M.Z,null,"#report-players"),"."),status:"past",date:null,countdown:null},{title:"Tournament begins",desc:r.createElement(r.Fragment,null,"Good luck in the tournament! Head to"," ",r.createElement("a",{className:"text-otd-slate-600 hover:underline dark:text-otd-slate-300",href:"https://start.gg/idtga"},"start.gg/idtga")," ","to organize your matches and report your scores. Tune into the official broadcast at"," ",r.createElement("a",{className:"text-otd-slate-600 hover:underline dark:text-otd-slate-300",href:"https://twitch.tv/offthedial"},"twitch.tv/offthedial"),"."),status:"past",date:null,countdown:null,last:!0}];if(!e.data)return c;const d=new Date,u=[null===(t=e.data)||void 0===t?void 0:t.creationDate,N(null===(a=e.data)||void 0===a?void 0:a.startDate,-96),null===(n=e.data)||void 0===n?void 0:n.closeDate,N(null===(l=e.data)||void 0===l?void 0:l.startDate,-48),null===(o=e.data)||void 0===o?void 0:o.startDate,(0,y.Z)(null===(i=e.data)||void 0===i?void 0:i.smashgg.endAt)];let m=0;return u.forEach(((e,t)=>{d>e&&(m=t)})),c.forEach(((e,t)=>{c[t].date=u[t],t<m?c[t].status="past":t>m?(c[t].status="future",t===m+1&&(c[t].countdown=u[t])):c[t].status="present"})),c},j=()=>{const[e,t]=r.useState(!1),a=v(),s=Z();return r.createElement("div",{className:"flex items-center gap-3"},e&&r.createElement("div",{className:"flex gap-2"},r.createElement("p",{className:"text-slate-600 dark:text-slate-400"},"Are you sure?"),r.createElement("button",{onClick:()=>t(!1),className:"font-bold hover:underline"},"Cancel")),r.createElement("button",{onClick:()=>{e?s.mutate():t(!0)},className:(0,C.Z)("flex items-center justify-center rounded-lg border-2 border-transparent p-3 text-slate-400 hover:border-slate-300 hover:bg-slate-300 hover:text-red-700 dark:text-slate-700 dark:hover:border-slate-800 dark:hover:bg-slate-800 dark:hover:text-red-400",e&&"border-slate-300 bg-slate-300 !text-red-700 hover:!bg-slate-400 dark:border-slate-800 dark:bg-slate-800 dark:!text-red-400 dark:hover:!bg-slate-700")},r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-6 w-6"},r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))),r.createElement("button",{onClick:a.mutate,className:"flex items-center justify-center rounded-lg border-2 border-slate-300 p-3 hover:bg-slate-300 hover:text-red-700 dark:border-slate-800 dark:hover:bg-slate-800 dark:hover:text-red-400"},r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-6 w-6"},r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))))},F=()=>{var e;return!1===(null===(e=(0,o.Z)().data)||void 0===e?void 0:e.hasJoined)?r.createElement("div",{className:"-m-8 mb-8 flex items-start gap-4 bg-orange-400/20 p-4 text-lg text-orange-500 dark:bg-orange-500/20 dark:text-orange-400 sm:m-0 sm:mb-8 sm:rounded-xl"},r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"mt-1 h-6 w-6 shrink-0"},r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})),r.createElement("div",{className:"grow"},r.createElement("p",{className:"mb-4 text-orange-700 dark:text-orange-200"},"You must be in the Off the Dial discord server to participate in tournaments."),r.createElement(s.rU,{className:"font-bold text-orange-800 hover:underline dark:text-orange-100",to:"/discord"},"Join the Server"))):null},U=()=>r.createElement("div",{className:"w-full flex-1 border-t-2 border-slate-300 dark:border-slate-800"}),T=e=>{let{className:t,children:a}=e;return r.createElement("div",{className:(0,C.Z)("rounded-xl sm:bg-slate-50 sm:p-8 sm:dark:bg-slate-850",t)},a)};var B=()=>r.createElement(c.ZP,{className:"m-8",helmet:{title:"Profile"}},r.createElement(d.Z,null,r.createElement("div",{className:"mx-auto max-w-3xl"},r.createElement(F,null),r.createElement("div",{className:"rounded-xl sm:bg-slate-200 sm:p-8 dark:sm:bg-slate-900"},r.createElement(S,null)))))},4469:function(e,t,a){a.d(t,{D:function(){return m}});var r=a(7294),s=a(464),n=a(2161),l=a(9886),o=a(81),i=a(3989);class c extends i.l{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.client.defaultMutationOptions(e),(0,n.VS)(t,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this})}onUnsubscribe(){var e;this.listeners.length||(null==(e=this.currentMutation)||e.removeObserver(this))}onMutationUpdate(e){this.updateResult();const t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==e?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:(0,l.R)(),t={...e,isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){o.V.batch((()=>{var t,a,r,s;if(this.mutateOptions)if(e.onSuccess)null==(t=(a=this.mutateOptions).onSuccess)||t.call(a,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(r=(s=this.mutateOptions).onSettled)||r.call(s,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context);else if(e.onError){var n,l,o,i;null==(n=(l=this.mutateOptions).onError)||n.call(l,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(o=(i=this.mutateOptions).onSettled)||o.call(i,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}e.listeners&&this.listeners.forEach((e=>{e(this.currentResult)}))}))}}var d=a(5945),u=a(4798);function m(e,t,a){const l=(0,n.lV)(e,t,a),i=(0,d.NL)({context:l.context}),[m]=r.useState((()=>new c(i,l)));r.useEffect((()=>{m.setOptions(l)}),[m,l]);const g=(0,s.$)(r.useCallback((e=>m.subscribe(o.V.batchCalls(e))),[m]),(()=>m.getCurrentResult()),(()=>m.getCurrentResult())),v=r.useCallback(((e,t)=>{m.mutate(e,t).catch(h)}),[m]);if(g.error&&(0,u.L)(m.options.useErrorBoundary,[g.error]))throw g.error;return{...g,mutate:v,mutateAsync:g.mutate}}function h(){}}}]);
//# sourceMappingURL=component---src-pages-profile-index-js-87f669ec1150845583a7.js.map